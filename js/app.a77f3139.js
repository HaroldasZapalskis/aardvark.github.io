(function(t){function e(e){for(var s,o,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},r=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"col-3"},[n("Stats",{ref:"stats",attrs:{"color-mapping":t.colorMapping}})],1),n("div",{staticClass:"col-9"},[n("GameBoard",{attrs:{"color-mapping":t.colorMapping}}),n("Events",{attrs:{"fake-time-till-next-game":t.fakeTimeTillNextGame}}),n("Logger")],1)])])},r=[],o=(n("d81d"),{configuration:"configuration",nextGame:"nextGame",stats:"stats",game:"game/"}),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",[t._v("Stats(last "+t._s(t.statsBasedOnLastGames)+")")]),t.stats&&t.stats.length>0&&t.$store.getters.slots.length>0?[t._m(0),t._l(t.stats,(function(e,s){return n("div",{key:e.result,class:"bg-"+t.getStatsBackgroundModifier(s)},[0===s?n("h5",{staticClass:"text-center pt-3"},[t._v("Cold")]):t._e(),s===t.numberOfColds?n("h5",{staticClass:"text-center pt-3"},[t._v("Neutral")]):t._e(),s===t.stats.length-t.numberOfHots?n("h5",{staticClass:"text-center mt-3 pt-3"},[t._v("Hot")]):t._e(),n("div",{staticClass:"d-flex justify-content-around align-items-center"},[n("div",{staticClass:"text-center p-1 rounded text-white stats-slot",class:"bg-"+t.findColorBySlotNumber(e.result)},[t._v(t._s(e.result)+" ")]),n("div",{staticClass:"text-dark"},[t._v(t._s(e.count))])])])}))]:n("div",{staticClass:"mt-5 d-flex justify-content-center"},[n("Spinner")],1)],2)},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-around"},[n("h5",[t._v("Slot")]),n("h5",[t._v("Hits")])])}],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner-border",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],d=n("2877"),f={},m=Object(d["a"])(f,c,u,!1,null,null,null),g=m.exports,p={components:{Spinner:g},data:function(){return{statsBasedOnLastGames:200,numberOfColds:5,numberOfHots:5,stats:null}},props:{colorMapping:Object},methods:{getStatsBackgroundModifier:function(t){return t<this.numberOfColds?"cold":this.$store.getters.slots.length-this.numberOfHots<t+1?"hot":""},findColorBySlotNumber:function(t){if(!this.$store.getters.slots)return"";var e=this.$store.getters.slotByNumber(t);return e?this.colorMapping[e.color]:""},getStats:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.stats=null;var n=2e3;setTimeout((function(){var e=o.stats+"?limit="+t.statsBasedOnLastGames;t.$store.dispatch("addLog","GET .../"+e),t.axios.get(e).then((function(s){s.data?(t.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+e),t.stats=s.data):(t.$store.dispatch("addLog","REQUEST FAIL GET .../"+e+". TRYING AGAIN IN "+n/1e3+"seconds"),t.getStats(n))})).catch((function(){t.$store.dispatch("addLog","REQUEST FAIL GET .../"+e+". TRYING AGAIN IN "+n/1e3+"seconds"),t.getStats(n)}))}),e)}},created:function(){this.getStats()}},h=p,v=(n("bc97"),Object(d["a"])(h,i,l,!1,null,null,null)),G=v.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Game board")]),n("div",{staticClass:"row mt-2 pl-3 pr-3"},[t.$store.getters.slots.length>0?t._l(t.$store.getters.slots,(function(e){return n("div",{key:e.number,staticClass:"text-white p-1 col-1 rounded text-center",class:"bg-"+t.colorMapping[e.color]},[t._v(t._s(e.number)+" ")])})):n("div",{staticClass:"mt-5 d-flex justify-content-center w-100 mb-5"},[n("Spinner")],1)],2)])},b=[],E={components:{Spinner:g},props:{colorMapping:Object}},x=E,S=Object(d["a"])(x,T,b,!1,null,null,null),_=S.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"mt-3"},[t._v("Events")]),t.$store.getters.events.length>0?n("div",{staticClass:"border rounded"},t._l(t.$store.getters.events,(function(e,s){return n("div",{key:s},[n("p",{staticClass:"text-dark p-3 mb-0",class:{"bg-light":s%2===0}},[t._v(t._s(t.getText(e)))])])})),0):n("div",{staticClass:"mt-5 d-flex justify-content-center w-100 mb-5"},[n("Spinner")],1)])},I=[],L=(n("a9e3"),n("ac1f"),n("5319"),{components:{Spinner:g},props:{fakeTimeTillNextGame:Number},methods:{getText:function(t){return t.replace("%seconds%",this.fakeTimeTillNextGame<0?0:this.fakeTimeTillNextGame)}}}),C=L,$=Object(d["a"])(C,N,I,!1,null,null,null),O=$.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$store.getters.logger.length>0?n("div",{staticClass:"mt-5"},[n("h2",[t._v("Log")]),n("div",{staticClass:"rounded border bg-light p-3"},t._l(t.$store.getters.logger,(function(e,s){return n("p",{key:s},[t._v(t._s(e))])})),0)]):t._e()},k=[],R={},A=R,j=Object(d["a"])(A,y,k,!1,null,null,null),w=j.exports,U={name:"App",components:{Stats:G,GameBoard:_,Events:O,Logger:w},data:function(){return{nextGameId:null,fakeTimeTillNextGame:null,timerInterval:null,timeToWaitBeforeFetchingGameResults:null,colorMapping:{green:"success",black:"dark",red:"danger"}}},methods:{getConfiguration:function(){var t=this,e=2e3;setTimeout((function(){t.$store.dispatch("addLog","GET .../"+o.configuration),t.axios.get(o.configuration).then((function(n){if(n.data&&n.data.colors&&n.data.results){var s=n.data.colors.map((function(t,e){var s=n.data.positionToId[e];return{color:n.data.colors[s],number:parseFloat(n.data.results[s])}}));t.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+o.configuration),t.$store.dispatch("setSlots",s)}else t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.configuration+". TRYING AGAIN IN "+e/1e3+"seconds"),t.getConfiguration(e)})).catch((function(){t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.configuration+". TRYING AGAIN IN "+e/1e3+"seconds"),t.getConfiguration(e)}))}))},getNextGame:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=2e3;setTimeout((function(){t.$store.dispatch("addLog","GET .../"+o.nextGame),t.axios.get(o.nextGame).then((function(e){e.data&&e.data.fakeStartDelta&&e.data.startDelta&&e.data.id?(t.fakeTimeTillNextGame=e.data.fakeStartDelta,t.timeToWaitBeforeFetchingGameResults=e.data.startDelta-e.data.fakeStartDelta,t.nextGameId=e.data.id,t.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+o.nextGame)):(t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGame+". TRYING AGAIN IN "+n/1e3+"seconds"),t.getNextGame(n))})).catch((function(){t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGame+". TRYING AGAIN IN "+n/1e3+"seconds"),t.getNextGame(n)}))}),e)},getGameResults:function(t){var e=this,n=2e3;setTimeout((function(){e.$store.dispatch("addLog","GET .../"+o.nextGameId),e.axios.get(o.game+e.nextGameId).then((function(t){t.data.result?(e.$store.dispatch("replaceLastEvent","Game "+e.nextGameId+" ended, result is "+t.data.result),e.$refs.stats.getStats(),e.getNextGame(),e.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+o.nextGameId)):(e.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGameId+". TRYING AGAIN IN "+n/1e3+"seconds"),e.getGameResults(n))})).catch((function(){e.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGameId+". TRYING AGAIN IN "+n/1e3+"seconds"),e.getGameResults(n)}))}),null!==t&&void 0!==t?t:1e3*this.timeToWaitBeforeFetchingGameResults)},setTimeLeftTillNextGame:function(t){var e=this.fakeTimeTillNextGame-(t?0:1);this.fakeTimeTillNextGame=t&&e<0?0:e}},created:function(){this.getConfiguration(),this.getNextGame()},watch:{nextGameId:function(){var t=this;this.setTimeLeftTillNextGame(!0),this.timerInterval=setInterval((function(){return t.setTimeLeftTillNextGame()}),1e3),this.$store.dispatch("addEvent","Game "+this.nextGameId+" will start in %seconds% sec")},fakeTimeTillNextGame:function(){0===this.fakeTimeTillNextGame&&(this.$store.dispatch("replaceLastEvent","Game "+this.nextGameId+", the wheel is spinning"),clearInterval(this.timerInterval),this.getGameResults())}}},B=U,M=(n("5c0b"),Object(d["a"])(B,a,r,!1,null,null,null)),F=M.exports,Q=n("bc3a"),D=n.n(Q),Y=n("a7fe"),P=n.n(Y),H=(n("99af"),n("7db0"),n("fb6a"),n("2909")),V=n("2f62");s["a"].use(V["a"]);var W=new V["a"].Store({state:{slots:[],events:[],logger:[]},mutations:{SET_SLOTS:function(t,e){t.slots=e},SET_EVENTS:function(t,e){t.events=e},ADD_LOG:function(t,e){t.logger.push(e)}},actions:{setSlots:function(t,e){var n=t.commit;n("SET_SLOTS",e)},addEvent:function(t,e){var n=t.commit,s=t.state;n("SET_EVENTS",[].concat(Object(H["a"])(s.events.slice()),[e]))},replaceLastEvent:function(t,e){var n=t.commit,s=t.state;n("SET_EVENTS",[].concat(Object(H["a"])(s.events.slice(0,s.events.length-1)),[e]))},addLog:function(t,e){var n=t.commit,s=(new Date).toISOString();n("ADD_LOG",s+" "+e)}},getters:{slots:function(t){return t.slots},slotByNumber:function(t){return function(e){return t.slots.find((function(t){return t.number===e}))}},events:function(t){return t.events},logger:function(t){return t.logger}}});n("ab8b");s["a"].use(P.a,D.a),s["a"].axios.defaults.baseURL="https://dev-games-backend.advbet.com/v1/ab-roulette/1/",new s["a"]({store:W,render:function(t){return t(F)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("6aeb"),a=n.n(s);a.a},"6aeb":function(t,e,n){},bc97:function(t,e,n){"use strict";var s=n("fbe9"),a=n.n(s);a.a},fbe9:function(t,e,n){}});
//# sourceMappingURL=app.a77f3139.js.map