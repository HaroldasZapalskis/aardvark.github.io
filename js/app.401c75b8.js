(function(t){function e(e){for(var n,o,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,i=1;i<s.length;i++){var l=s[i];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"app"}},[s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-3"},[s("Stats",{ref:"stats",attrs:{"color-mapping":t.colorMapping}})],1),s("div",{staticClass:"col-9"},[s("GameBoard",{attrs:{"color-mapping":t.colorMapping}}),s("Events",{attrs:{"fake-time-till-next-game":t.fakeTimeTillNextGame}}),s("Logger")],1)])])},r=[],o=(s("d81d"),{configuration:"configuration",nextGame:"nextGame",stats:"stats",game:"game/"}),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v("Stats(last "+t._s(t.statsBasedOnLastGames)+")")]),t.stats&&t.stats.length>0&&t.$store.getters.slots.length>0?[t._m(0),t._l(t.stats,(function(e,n){return s("div",{key:e.result,class:"bg-"+t.getStatsBackgroundModifier(n)},[0===n?s("h5",{staticClass:"text-center pt-3"},[t._v("Cold")]):t._e(),n===t.numberOfColds?s("h5",{staticClass:"text-center pt-3"},[t._v("Neutral")]):t._e(),n===t.stats.length-t.numberOfHots?s("h5",{staticClass:"text-center mt-3 pt-3"},[t._v("Hot")]):t._e(),s("div",{staticClass:"d-flex justify-content-around align-items-center"},[s("div",{staticClass:"text-center p-1 rounded text-white stats-slot",class:"bg-"+t.findColorBySlotNumber(e.result)},[t._v(t._s(e.result)+" ")]),s("div",{staticClass:"text-dark"},[t._v(t._s(e.count))])])])}))]:s("div",{staticClass:"mt-5 d-flex justify-content-center"},[s("Spinner")],1)],2)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-around"},[s("h5",[t._v("Slot")]),s("h5",[t._v("Hits")])])}],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner-border",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],d=s("2877"),f={},m=Object(d["a"])(f,c,u,!1,null,null,null),g=m.exports,p={components:{Spinner:g},data:function(){return{statsBasedOnLastGames:200,numberOfColds:5,numberOfHots:5,stats:null}},props:{colorMapping:Object},methods:{getStatsBackgroundModifier:function(t){return t<this.numberOfColds?"cold":this.$store.getters.slots.length-this.numberOfHots<t+1?"hot":""},findColorBySlotNumber:function(t){if(!this.$store.getters.slots)return"";var e=this.$store.getters.slotByNumber(t);return e?this.colorMapping[e.color]:""},getStats:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.stats=null;var s=2e3;setTimeout((function(){var e=o.stats+"?limit="+t.statsBasedOnLastGames;t.$store.dispatch("addLog","GET .../"+e),t.axios.get(e).then((function(n){n.data?(t.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+e),t.stats=n.data):(t.$store.dispatch("addLog","REQUEST FAIL GET .../"+e+". TRYING AGAIN IN "+s/1e3+"seconds"),t.getStats(s))})).catch((function(){t.$store.dispatch("addLog","REQUEST FAIL GET .../"+e+". TRYING AGAIN IN "+s/1e3+"seconds"),t.getStats(s)}))}),e)}},created:function(){this.getStats()}},h=p,v=(s("bc97"),Object(d["a"])(h,i,l,!1,null,null,null)),T=v.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Game board")]),s("div",{staticClass:"row mt-2 pl-3 pr-3"},[t.$store.getters.slots.length>0?t._l(t.$store.getters.slots,(function(e){return s("div",{key:e.number,staticClass:"text-white p-1 col-1 rounded text-center",class:"bg-"+t.colorMapping[e.color]},[t._v(t._s(e.number)+" ")])})):s("div",{staticClass:"mt-5 d-flex justify-content-center w-100 mb-5"},[s("Spinner")],1)],2)])},b=[],E={components:{Spinner:g},props:{colorMapping:Object}},S=E,x=Object(d["a"])(S,G,b,!1,null,null,null),_=x.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"mt-3"},[t._v("Events")]),t.$store.getters.events.length>0?s("div",{staticClass:"border rounded"},t._l(t.$store.getters.events,(function(e,n){return s("div",{key:n},[s("p",{staticClass:"text-dark p-3 mb-0",class:{"bg-light":n%2===0}},[t._v(t._s(t.getText(e)))])])})),0):s("div",{staticClass:"mt-5 d-flex justify-content-center w-100 mb-5"},[s("Spinner")],1)])},I=[],L=(s("a9e3"),s("ac1f"),s("5319"),{components:{Spinner:g},props:{fakeTimeTillNextGame:Number},methods:{getText:function(t){return t.replace("%seconds%",this.fakeTimeTillNextGame<0?0:this.fakeTimeTillNextGame)}}}),C=L,$=Object(d["a"])(C,N,I,!1,null,null,null),O=$.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.getters.logger.length>0?s("div",{staticClass:"mt-5"},[s("h2",[t._v("Log")]),s("div",{staticClass:"rounded border bg-light p-3"},t._l(t.$store.getters.logger,(function(e,n){return s("p",{key:n},[t._v(t._s(e))])})),0)]):t._e()},k=[],R={},A=R,j=Object(d["a"])(A,y,k,!1,null,null,null),w=j.exports,U={name:"App",components:{Stats:T,GameBoard:_,Events:O,Logger:w},data:function(){return{nextGameId:null,fakeTimeTillNextGame:null,timerInterval:null,timeToWaitBeforeFetchingGameResults:null,colorMapping:{green:"success",black:"dark",red:"danger"}}},methods:{getConfiguration:function(){var t=this,e=2e3;setTimeout((function(){t.$store.dispatch("addLog","GET .../"+o.configuration),t.axios.get(o.configuration).then((function(s){if(s.data&&s.data.colors&&s.data.results){var n=s.data.colors.map((function(t,e){var n=s.data.positionToId[e];return{color:s.data.colors[n],number:parseFloat(s.data.results[n])}}));t.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+o.configuration),t.$store.dispatch("setSlots",n)}else t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.configuration+". TRYING AGAIN IN "+e/1e3+"seconds"),t.getConfiguration(e)})).catch((function(){t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.configuration+". TRYING AGAIN IN "+e/1e3+"seconds"),t.getConfiguration(e)}))}))},getNextGame:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=2e3;setTimeout((function(){t.$store.dispatch("addLog","GET .../"+o.nextGame),t.axios.get(o.nextGame).then((function(e){e.data&&e.data.fakeStartDelta&&e.data.startDelta&&e.data.id?(t.fakeTimeTillNextGame=e.data.fakeStartDelta,t.timeToWaitBeforeFetchingGameResults=e.data.startDelta-e.data.fakeStartDelta,t.nextGameId=e.data.id,t.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+o.nextGame)):(t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGame+". TRYING AGAIN IN "+s/1e3+"seconds"),t.getNextGame(s))})).catch((function(){t.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGame+". TRYING AGAIN IN "+s/1e3+"seconds"),t.getNextGame(s)}))}),e)},getGameResults:function(t){var e=this,s=2e3;setTimeout((function(){var t=o.game+e.nextGameId;e.$store.dispatch("addLog","GET .../"+t),e.axios.get(t).then((function(n){n.data.result?(e.$store.dispatch("replaceLastEvent","Game "+t+" ended, result is "+n.data.result),e.$refs.stats.getStats(),e.getNextGame(),e.$store.dispatch("addLog","REQUEST SUCCESS GET .../"+t)):(e.$store.dispatch("addLog","REQUEST FAIL GET .../"+t+". TRYING AGAIN IN "+s/1e3+"seconds"),e.getGameResults(s))})).catch((function(){e.$store.dispatch("addLog","REQUEST FAIL GET .../"+o.nextGameId+". TRYING AGAIN IN "+s/1e3+"seconds"),e.getGameResults(s)}))}),null!==t&&void 0!==t?t:1e3*this.timeToWaitBeforeFetchingGameResults)},setTimeLeftTillNextGame:function(t){var e=this.fakeTimeTillNextGame-(t?0:1);this.fakeTimeTillNextGame=t&&e<0?0:e}},created:function(){this.getConfiguration(),this.getNextGame()},watch:{nextGameId:function(){var t=this;this.setTimeLeftTillNextGame(!0),this.timerInterval=setInterval((function(){return t.setTimeLeftTillNextGame()}),1e3),this.$store.dispatch("addEvent","Game "+this.nextGameId+" will start in %seconds% sec")},fakeTimeTillNextGame:function(){0===this.fakeTimeTillNextGame&&(this.$store.dispatch("replaceLastEvent","Game "+this.nextGameId+", the wheel is spinning"),clearInterval(this.timerInterval),this.getGameResults())}}},B=U,M=(s("5c0b"),Object(d["a"])(B,a,r,!1,null,null,null)),F=M.exports,Q=s("bc3a"),D=s.n(Q),Y=s("a7fe"),P=s.n(Y),H=(s("99af"),s("7db0"),s("fb6a"),s("2909")),V=s("2f62");n["a"].use(V["a"]);var W=new V["a"].Store({state:{slots:[],events:[],logger:[]},mutations:{SET_SLOTS:function(t,e){t.slots=e},SET_EVENTS:function(t,e){t.events=e},ADD_LOG:function(t,e){t.logger.push(e)}},actions:{setSlots:function(t,e){var s=t.commit;s("SET_SLOTS",e)},addEvent:function(t,e){var s=t.commit,n=t.state;s("SET_EVENTS",[].concat(Object(H["a"])(n.events.slice()),[e]))},replaceLastEvent:function(t,e){var s=t.commit,n=t.state;s("SET_EVENTS",[].concat(Object(H["a"])(n.events.slice(0,n.events.length-1)),[e]))},addLog:function(t,e){var s=t.commit,n=(new Date).toISOString();s("ADD_LOG",n+" "+e)}},getters:{slots:function(t){return t.slots},slotByNumber:function(t){return function(e){return t.slots.find((function(t){return t.number===e}))}},events:function(t){return t.events},logger:function(t){return t.logger}}});s("ab8b");n["a"].use(P.a,D.a),n["a"].axios.defaults.baseURL="https://dev-games-backend.advbet.com/v1/ab-roulette/1/",new n["a"]({store:W,render:function(t){return t(F)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var n=s("6aeb"),a=s.n(n);a.a},"6aeb":function(t,e,s){},bc97:function(t,e,s){"use strict";var n=s("fbe9"),a=s.n(n);a.a},fbe9:function(t,e,s){}});
//# sourceMappingURL=app.401c75b8.js.map